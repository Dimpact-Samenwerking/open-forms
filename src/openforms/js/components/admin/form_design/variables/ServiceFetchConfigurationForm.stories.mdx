import {ArgsTable, Canvas, Meta, Story} from '@storybook/addon-docs';

import {FormLogicContext} from '../Context';
import ServiceFetchConfigurationForm from './ServiceFetchConfigurationForm';

<Meta
  title="Form design/Service Fetch/ServiceFetchConfigurationForm"
  decorators={[
    Story => (
      <FormLogicContext.Provider
        value={{
          services: [
            {
              label: 'Service 1',
              apiRoot: 'http://foo.com/api/v1/',
              apiType: 'ORC',
            },
            {
              label: 'Service 2',
              apiRoot: 'http://bar.com/api/v1/',
              apiType: 'ORC',
            },
          ],
        }}
      >
        <Story />
      </FormLogicContext.Provider>
    ),
  ]}
  component={ServiceFetchConfigurationForm}
/>

# ServiceFetchConfigurationForm

Form to edit/create a ServiceFetchConfiguration

**Warning**: this component requires the following contexts: `FormLogicContext`.

export const Template = ({formik, selectExisting}) => (
  <ServiceFetchConfigurationForm formik={formik} selectExisting={selectExisting} />
);

## Presentation

<Canvas>
  <Story
    name="Default"
    args={{
      formik: {
        values: {
          method: 'GET',
          service: '',
          path: '',
          queryParams: [['', ['']]],
          headers: [['', '']],
          body: '',
          dataMappingType: '',
          mappingExpression: '',
        },
        onSubmit: (values, {setSubmitting}) => {
          alert(JSON.stringify(values, null, 2));
        },
        getFieldProps: name => ({name: name, value: '', onChange: event => null}),
        getFieldHelpers: name => ({}),
        setFieldValue: (name, value) => ({}),
      },
      selectExisting: false,
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

### Props

<ArgsTable of={ServiceFetchConfigurationForm} />
