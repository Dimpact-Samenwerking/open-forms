# Generated by Django 3.2.14 on 2022-07-29 13:01

from django.db import migrations

from openforms.variables.constants import FormVariableSources


def remove_component_variables_without_definition(apps, schema_editor):
    FormVariable = apps.get_model("forms", "FormVariable")

    FormVariable.objects.filter(
        form_definition__isnull=True, source=FormVariableSources.component
    ).delete()


class Migration(migrations.Migration):

    dependencies = [
        ("forms", "0036_alter_formvariable_source"),
    ]

    operations = [
        migrations.RunPython(
            remove_component_variables_without_definition, migrations.RunPython.noop
        ),
    ]
